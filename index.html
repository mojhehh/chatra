<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Simple Chat App</title>

  <!-- Tailwind CSS (optional, for looks) -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- Firebase SDKs -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
</head>

<body class="bg-gray-900 text-white h-screen flex flex-col">

  <!-- Chat Messages -->
  <div id="messages"
       class="flex-1 overflow-y-auto p-4 space-y-3 bg-gray-800">
  </div>

  <!-- Message Input -->
  <div class="p-4 bg-gray-700 flex">
    <input id="msgInput"
           class="flex-1 p-3 rounded bg-gray-600 outline-none"
           placeholder="Type a message...">
    <button id="sendBtn"
            class="ml-3 px-4 py-2 bg-blue-500 rounded hover:bg-blue-600">
      Send
    </button>
  </div>

  <script>
    // YOUR FIREBASE CONFIG
    const firebaseConfig = {
      apiKey: "AIzaSyC945jY7UEh4sOOuuk7OMZVXeIh333kxVk",
      authDomain: "chat-app-710f0.firebaseapp.com",
      projectId: "chat-app-710f0",
      storageBucket: "chat-app-710f0.firebasestorage.app",
      messagingSenderId: "225892837672",
      appId: "1:225892837672:web:f190f3585c4ffbd0f1c81d",
      databaseURL: "https://chat-app-710f0-default-rtdb.firebaseio.com"
    };

    // Initialize Firebase
    firebase.initializeApp(firebaseConfig);
    const db = firebase.database();

    // Ask for username
    let username = localStorage.getItem("username");
    if (!username) {
      username = prompt("Enter a username:");
      localStorage.setItem("username", username);
    }

    const msgInput = document.getElementById("msgInput");
    const sendBtn = document.getElementById("sendBtn");
    const messagesDiv = document.getElementById("messages");

    // Send a message
    sendBtn.onclick = () => {
      const text = msgInput.value.trim();
      if (text === "") return;

      db.ref("messages").push({
        user: username,
        text: text,
        time: Date.now()
      });

      msgInput.value = "";
    };

    // Listen for new messages in realtime
    db.ref("messages").on("child_added", snap => {
      const msg = snap.val();

      const el = document.createElement("div");
      el.innerHTML = `
        <div class="p-3 bg-gray-700 rounded">
          <span class="font-bold text-orange-300">${msg.user}</span>: 
          ${msg.text}
        </div>
      `;

      messagesDiv.appendChild(el);

      // Auto scroll to bottom
      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    });
  </script>

</body>
</html>
