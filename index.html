
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <title>Chatra</title>
    <link rel="stylesheet" href="style.css">
    <!-- iPad/Safari-optimized viewport settings -->
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
    <!-- iOS Safari enhancements -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="format-detection" content="telephone=no" />

    <script>
      // Redirect to pause page unless user opted to skip
      (function () {
        try {
          var skip = localStorage.getItem('skipRedirect');
          if (skip !== 'true') {
            // Only redirect when landing on the root page
            // Prevent redirect loops
            if (!location.pathname.endsWith('chatra.html')) {
              location.replace('chatra.html');
            }
          }
        } catch (e) {
          // If localStorage is blocked, still redirect
          if (!location.pathname.endsWith('chatra.html')) {
            location.replace('chatra.html');
          }
        }
      })();
    </script>

    <!-- Tailwind CSS (optional, for looks) -->
    <script>
      // Suppress Tailwind CDN production warning BEFORE loading
      window.tailwindConfig = {};
    </script>
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Firebase SDKs -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>

    <!-- Hide scrollbar but keep scrolling + custom animations / glassmorphism -->

  </head>

  <body class="bg-slate-950 text-white h-screen min-h-screen flex flex-col relative overflow-hidden">
    <!-- Glowing background blobs -->
    <div class="bg-orb bg-orb-blue w-72 h-72 -top-20 -left-10"></div>
    <div class="bg-orb bg-orb-purple w-80 h-80 -bottom-32 -right-6"></div>
    <div class="bg-orb bg-orb-pink w-64 h-64 top-1/4 right-1/4"></div>

    <!-- Loading Screen -->
    <div
      id="loadingScreen"
      class="fixed inset-0 z-50 bg-slate-950 flex items-center justify-center"
    >
      <div class="flex flex-col items-center gap-6">
        <div class="relative w-20 h-20">
          <!-- Outer rotating ring -->
          <div class="absolute inset-0 rounded-full border-2 border-transparent border-t-sky-500 border-r-sky-400 animate-spin"></div>
          <!-- Middle rotating ring (opposite direction) -->
          <div class="absolute inset-2 rounded-full border-2 border-transparent border-b-indigo-500 border-l-indigo-400 animate-spin" style="animation-direction: reverse; animation-duration: 2s;"></div>
          <!-- Inner pulsing circle -->
          <div class="absolute inset-4 rounded-full bg-gradient-to-r from-sky-500 to-indigo-500 animate-pulse"></div>
        </div>
        <div class="text-center">
          <h2 class="text-xl font-semibold text-slate-100 mb-2">Loading your messages</h2>
          <p class="text-sm text-slate-400">Connecting to chat...</p>
        </div>
      </div>
    </div>

    <!-- Top bar / logo -->
    <header class="px-4 pt-4 pb-2 flex items-center justify-between z-10">
      <div class="flex items-center gap-3">
        <div
          class="h-9 w-9 rounded-lg bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center text-xl font-black relative shadow-lg shadow-blue-900/50 hover:shadow-blue-900/80 hover:from-blue-500 hover:to-blue-700 transition-all duration-200"
          title="Chatra Chat"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
            <!-- Chat bubble with gradient -->
            <path d="M20 2H4C2.9 2 2 2.9 2 4V22L6 18H20C21.1 18 22 17.1 22 16V4C22 2.9 21.1 2 20 2Z" fill="white" opacity="0.95"/>
            <!-- Inner accent -->
            <circle cx="7" cy="10" r="1.5" fill="#1e40af" opacity="0.9"/>
            <circle cx="12" cy="10" r="1.5" fill="#1e40af" opacity="0.9"/>
            <circle cx="17" cy="10" r="1.5" fill="#1e40af" opacity="0.9"/>
          </svg>
        </div>
        <div class="flex flex-col">
          <h1 class="font-semibold text-lg text-slate-100">
            Chatra
          </h1>
        </div>
      </div>
      <div class="flex items-center gap-2">
        <button
          id="notifBellBtn"
          class="hidden relative px-3 py-2 rounded-full bg-slate-800/70 border border-slate-700/70 text-slate-200 hover:bg-slate-700/70 transition-colors"
          title="Notifications"
        >
          <span class="sr-only">Notifications</span>
          <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="inline align-middle">
            <path d="M18 8a6 6 0 1 0-12 0c0 7-3 9-3 9h18s-3-2-3-9"/>
            <path d="M13.73 21a2 2 0 0 1-3.46 0"/>
          </svg>
          <span
            id="notifBellBadge"
            class="hidden absolute -top-1 -right-1 text-[10px] px-1.5 py-0.5 rounded-full bg-red-500 text-white font-semibold"
          >0</span>
        </button>
        <div
          class="hidden sm:flex items-center gap-2 px-3 py-1 rounded-full bg-slate-800/50 border border-slate-700/50 text-[11px] uppercase tracking-widest"
        >
          <span class="h-2 w-2 rounded-full bg-emerald-500"></span>
          <span class="text-slate-300">Online</span>
        </div>
      </div>
    </header>

    <!-- Login Form (visible by default) -->
    <div
      id="loginForm"
      class="flex-1 flex items-center justify-center pb-4 px-3 sm:px-4"
    >
      <div
        class="glass-card w-full max-w-md p-6 sm:p-8 rounded-2xl"
      >
        <div class="flex flex-col items-center mb-6">
          <h2 class="text-2xl font-semibold text-center mb-2">Welcome back</h2>
          <p class="text-sm text-slate-300 text-center">
            Log in to start chatting
          </p>
        </div>

        <!-- Username only -->
        <label class="block text-xs font-medium text-slate-300 mb-1 ml-1"
          >Username</label
        >
        <input
          id="loginUsername"
          type="text"
          placeholder="Your username"
          class="mb-4 p-3 rounded-xl w-full bg-slate-800/80 border border-slate-600/60 focus:border-sky-400 focus:ring-2 focus:ring-sky-500/60 outline-none transition-all shadow-inner shadow-slate-900/80"
          required
        />

        <!-- Password -->
        <label class="block text-xs font-medium text-slate-300 mb-1 ml-1"
          >Password</label
        >
        <input
          id="loginPassword"
          type="password"
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          class="mb-3 p-3 rounded-xl w-full bg-slate-800/80 border border-slate-600/60 focus:border-sky-400 focus:ring-2 focus:ring-sky-500/60 outline-none transition-all shadow-inner shadow-slate-900/80"
          required
        />

        <!-- Remember me -->
        <label class="flex items-center gap-2 mb-3 text-xs text-gray-300">
          <input
            id="rememberMe"
            type="checkbox"
            class="h-4 w-4 rounded border-slate-500 bg-slate-800/90"
          />
          <span>Remember me on this device</span>
        </label>

        <!-- Error / info messages -->
        <p
          id="loginError"
          class="text-xs text-red-400 min-h-[1.25rem] mb-1"
        ></p>
        <p
          id="loginInfo"
          class="text-xs text-emerald-400 min-h-[1.25rem] mb-3"
        ></p>

        <button
          id="loginBtn"
          class="btn-primary w-full p-3 bg-sky-600 hover:bg-sky-700 rounded-lg font-medium transition-colors"
        >
          Login
        </button>

        <p class="mt-4 text-xs text-gray-300 text-center">
          Don't have an account?
          <a
            href="#"
            id="registerLink"
            class="text-sky-300 hover:text-sky-200 underline underline-offset-4"
            >Register here</a
          >
        </p>
      </div>
    </div>

    <!-- Registration Form (hidden by default) -->
    <div
      id="registerForm"
      class="flex-1 flex items-center justify-center pb-4 px-3 sm:px-4 hidden"
    >
      <div
        class="glass-card w-full max-w-md p-6 sm:p-8 rounded-2xl"
      >
        <div class="flex flex-col items-center mb-6">
          <h2 class="text-2xl font-semibold text-center mb-2">Create account</h2>
          <p class="text-sm text-slate-300 text-center">
            Pick a unique username
          </p>
        </div>

        <!-- Username -->
        <label class="block text-xs font-medium text-slate-300 mb-1 ml-1"
          >Username</label
        >
        <input
          id="regUsername"
          type="text"
          placeholder="CoolName"
          class="mb-3 p-3 rounded-xl w-full bg-slate-800/80 border border-slate-600/60 focus:border-sky-400 focus:ring-2 focus:ring-sky-500/60 outline-none transition-all shadow-inner shadow-slate-900/80"
          required
        />

        <!-- Password -->
        <label class="block text-xs font-medium text-slate-300 mb-1 ml-1"
          >Password</label
        >
        <input
          id="regPassword"
          type="password"
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          class="mb-3 p-3 rounded-xl w-full bg-slate-800/80 border border-slate-600/60 focus:border-sky-400 focus:ring-2 focus:ring-sky-500/60 outline-none transition-all shadow-inner shadow-slate-900/80"
          required
        />

        <!-- Confirm Password -->
        <label class="block text-xs font-medium text-slate-300 mb-1 ml-1"
          >Confirm Password</label
        >
        <input
          id="regPasswordConfirm"
          type="password"
          placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢"
          class="mb-3 p-3 rounded-xl w-full bg-slate-800/80 border border-slate-600/60 focus:border-sky-400 focus:ring-2 focus:ring-sky-500/60 outline-none transition-all shadow-inner shadow-slate-900/80"
          required
        />

        <!-- Error / info messages -->
        <p
          id="registerError"
          class="text-xs text-red-400 min-h-[1.25rem] mb-3"
        ></p>

        <button
          id="registerBtn"
          class="btn-primary w-full p-3 bg-sky-600 hover:bg-sky-700 rounded-lg font-medium transition-colors"
        >
          Register
        </button>

        <!-- Terms and Privacy Policy -->
        <p class="mt-4 text-xs text-gray-300 text-center">
          By signing up you agree to our
          <button
            type="button"
            id="termsLink"
            onclick="document.getElementById('termsModal').classList.remove('modal-closed');document.getElementById('termsModal').classList.add('modal-open');"
            class="font-bold text-sky-300 hover:text-sky-200 underline underline-offset-4 bg-none border-none cursor-pointer"
          >
            Terms of Service
          </button>
          and
          <button
            type="button"
            id="privacyLink"
            onclick="document.getElementById('privacyModal').classList.remove('modal-closed');document.getElementById('privacyModal').classList.add('modal-open');"
            class="font-bold text-sky-300 hover:text-sky-200 underline underline-offset-4 bg-none border-none cursor-pointer"
          >
            Privacy Policy
          </button>
        </p>

        <p class="mt-3 text-xs text-gray-300 text-center">
          Already have an account?
          <a
            href="#"
            id="loginLink"
            class="text-sky-300 hover:text-sky-200 underline underline-offset-4"
            >Login here</a
          >
        </p>
      </div>
    </div>

    <!-- Terms of Service Modal (global) -->
    <div
      id="termsModal"
      class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
    >
      <div class="glass-card max-w-2xl w-full rounded-2xl p-6 sm:p-8 max-h-[90vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-2xl font-semibold text-slate-100">Terms of Service</h3>
          <button
            id="termsCloseBtn"
            onclick="document.getElementById('termsModal').classList.add('modal-closed');document.getElementById('termsModal').classList.remove('modal-open');"
            class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
          >
            ‚úï
          </button>
        </div>

        <!-- Terms content - EDIT THIS SECTION WITH YOUR OWN TERMS -->
<div id="termsContent" class="text-sm text-slate-300 space-y-3 leading-relaxed">
  <p>
    <strong>Last Updated:</strong> December 10, 2025
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">1. Acceptance of Terms</h4>
  <p>
    By creating an account and using Chatra, you agree to comply with these Terms of Service.
    If you do not agree to these terms, please do not use our service.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">2. User Accounts</h4>
  <p>
    You are responsible for maintaining the confidentiality of your account password and for all activities
    that occur under your account. You agree to provide accurate information when creating an account.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">3. User Conduct</h4>
  <p>
    You agree not to use Chatra for any unlawful purpose or in any way that violates these Terms.
    This includes but is not limited to: harassment, hate speech, spam, or sharing inappropriate content.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">4. Content</h4>
  <p>
    You retain all rights to any content you post on Chatra. By posting content, you grant Chatra
    a license to display and store that content to provide our services.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">5. Limitation of Liability</h4>
  <p>
    Chatra is provided "as is" without warranties of any kind. We are not liable for any indirect,
    incidental, special, or consequential damages resulting from your use of the service.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">6. Changes to Terms</h4>
  <p>
    We reserve the right to modify these Terms of Service at any time. Continued use of Chatra
    after changes constitute your acceptance of the new Terms.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">7. Acceptable Use Policy (AUP)</h4>
  <p>
    To keep Chatra safe for everyone, you agree not to use the Service to:
  </p>

  <h5 class="font-semibold text-slate-200 mt-4">Safety & Respect</h5>
  <p>
    - Harass, threaten, bully, or encourage harm,  
    - Post hate speech, racism, slurs, or discrimination,  
    - Target or attack people based on gender, identity, nationality, religion, disability, or similar traits.
  </p>

  <h5 class="font-semibold text-slate-200 mt-4">Content Rules</h5>
  <p>
    - Share pornography, sexual content, nudity, or graphic violence,  
    - Post extremely disturbing or dangerous content,  
    - Upload copyrighted content you do not own,  
    - Spread false information that could harm others.
  </p>

  <h5 class="font-semibold text-slate-200 mt-4">Security & Misuse</h5>
  <p>
    - Spread malware, scams, or harmful links,  
    - Attempt to hack, overload, abuse, or reverse-engineer the Service,  
    - Use bots, exploits, or automate features without permission,  
    - Manipulate or break security or moderation systems.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">8. Privacy and Safety</h4>
  <p>
    Chatra stores limited information ‚Äî such as usernames, messages, and timestamps ‚Äî to provide chat features.
    Private chats and DMs are visible only to people in the conversation.
    However, authorized administrators may review stored content for moderation, safety checks, legal requests, or technical fixes.
    For details on how your data is handled, please read our Privacy Policy.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">9. Moderation</h4>
  <p>
    We reserve the right to:
    - Remove or edit messages, usernames, or other content,  
    - Temporarily or permanently ban users,  
    - Limit or disable features that are being abused.
    These actions may be taken without prior notice to protect users and maintain a safe environment.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">10. Service Availability</h4>
  <p>
    Chatra is provided ‚Äúas is.‚Äù  
    While we try to keep the Service running smoothly, we cannot guarantee:
    - The Service will always be online or error-free,  
    - That all messages or data will always send or save correctly,  
    - That downtime or bugs will never happen.  
    We are not responsible for losses or issues caused by outages, errors, or misuse.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">11. DMCA / Copyright Policy</h4>
  <p>
    Chatra respects copyright laws, including the Digital Millennium Copyright Act (DMCA).  
    If you believe something on Chatra uses your copyrighted work without permission, you may send a DMCA takedown request. We will review the request and remove the content if required.
  </p>
  <p>
    A valid DMCA request must include:
    - Your name and contact information,  
    - A description of the copyrighted work,  
    - A link or description of where the content appears on Chatra,  
    - A statement explaining you believe the use is not authorized,  
    - A statement that the information in your request is true,  
    - Your signature (typed name is okay).
  </p>
  <p>
    Send DMCA requests to:  
    üìß **chatrahelpcenter@gmail.com**
  </p>
  <p>
    If your content is removed and you believe this was a mistake, you may send a counter-notice explaining why the content is permitted.  
    We may disable accounts that repeatedly violate copyright laws.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">12. Changes to These Terms</h4>
  <p>
    We may update these Terms from time to time to improve clarity or follow new laws.  
    When we do, we will update the ‚ÄúLast updated‚Äù date above.  
    If you continue using Chatra after updates, that means you accept the new Terms.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">13. User Responsibility and Liability</h4>
  <p>
    <strong>YOU ARE SOLELY RESPONSIBLE FOR ALL CONTENT YOU POST ON CHATRA.</strong>  
    This includes messages, images, videos, links, profile information, and any other user-generated content.
  </p>
  <p>
    By using Chatra, you acknowledge and agree that:
  </p>
  <ul class="list-disc pl-5 space-y-1">
    <li><strong>You own your content:</strong> You are fully responsible for everything you post, share, or upload.</li>
    <li><strong>We are not liable:</strong> Chatra, its owners, operators, administrators, and affiliates are NOT responsible or liable for any user-generated content.</li>
    <li><strong>No monitoring obligation:</strong> We do not pre-screen, approve, or endorse user content. We are not responsible for monitoring all activity on the platform.</li>
    <li><strong>Third-party content:</strong> We are not responsible for content posted by other users, including harmful, offensive, or illegal content.</li>
    <li><strong>Your legal responsibility:</strong> You may be held legally accountable for content you post that violates laws or harms others.</li>
  </ul>
  <p>
    <strong>Under California law (47 U.S.C. ¬ß 230):</strong> Chatra is a platform provider, not a publisher of user content.  
    We are not liable for defamation, harm, or illegal content posted by users.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">14. Prohibited Content and Behavior</h4>
  <p>
    The following activities are <strong>strictly prohibited</strong> and may result in immediate account suspension or permanent ban:
  </p>

  <h5 class="font-semibold text-slate-200 mt-3">Threats and Violence</h5>
  <ul class="list-disc pl-5 space-y-1">
    <li><strong>Death threats:</strong> Threatening to kill, harm, or cause physical violence to any person.</li>
    <li><strong>Serious threats:</strong> Threatening violence, assault, kidnapping, or other serious harm.</li>
    <li><strong>Encouragement of violence:</strong> Encouraging, glorifying, or promoting violence, self-harm, suicide, or dangerous acts.</li>
    <li><strong>Doxxing:</strong> Sharing private information (addresses, phone numbers, personal details) to threaten or harass someone.</li>
  </ul>

  <h5 class="font-semibold text-slate-200 mt-3">Harassment and Abuse</h5>
  <ul class="list-disc pl-5 space-y-1">
    <li><strong>Targeted harassment:</strong> Repeatedly attacking, insulting, or harassing a specific person.</li>
    <li><strong>Bullying:</strong> Sustained campaigns to intimidate, humiliate, or isolate users.</li>
    <li><strong>Sexual harassment:</strong> Unwanted sexual advances, explicit messages, or inappropriate requests.</li>
    <li><strong>Hate speech:</strong> Attacking people based on race, ethnicity, religion, gender, sexual orientation, disability, or national origin.</li>
  </ul>

  <h5 class="font-semibold text-slate-200 mt-3">Dangerous and Illegal Content</h5>
  <ul class="list-disc pl-5 space-y-1">
    <li><strong>Illegal activity:</strong> Promoting, facilitating, or engaging in illegal activities.</li>
    <li><strong>Child exploitation:</strong> Any content involving minors in sexual, exploitative, or harmful contexts (zero tolerance).</li>
    <li><strong>Terrorism:</strong> Promoting or supporting terrorist organizations or activities.</li>
    <li><strong>Dangerous instructions:</strong> Sharing methods to create weapons, explosives, or harmful substances.</li>
  </ul>

  <p>
    <strong>Zero Tolerance Policy:</strong> Death threats, child exploitation, and credible threats of violence will result in <strong>immediate permanent ban</strong> and may be reported to law enforcement.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">15. Content Reporting and Enforcement</h4>
  <p>
    Chatra provides tools for users to report harmful, abusive, or rule-breaking content.
  </p>

  <h5 class="font-semibold text-slate-200 mt-3">How to Report Content</h5>
  <p>
    If you see content that violates these Terms, you can:
  </p>
  <ul class="list-disc pl-5 space-y-1">
    <li><strong>Report a message:</strong> Click the "Report" button (‚ö†Ô∏è) next to any message in the chat.</li>
    <li><strong>Report a user:</strong> View their profile and use the report option (if available).</li>
    <li><strong>Contact us directly:</strong> Email serious concerns to <strong>chatrahelpcenter@gmail.com</strong>.</li>
  </ul>

  <h5 class="font-semibold text-slate-200 mt-3">What We Do With Reports</h5>
  <p>
    When we receive a report, we will:
  </p>
  <ul class="list-disc pl-5 space-y-1">
    <li>Review the reported content and context.</li>
    <li>Take action if the content violates our Terms (removal, warning, mute, or ban).</li>
    <li>In severe cases (threats, illegal content), we may involve law enforcement.</li>
  </ul>
  <p>
    <strong>We reserve the right to remove any content or ban any user</strong> at our sole discretion to protect the safety and integrity of the platform.
  </p>

  <h5 class="font-semibold text-slate-200 mt-3">False Reports</h5>
  <p>
    Abusing the report system (e.g., mass false reports, harassment through reporting) may result in action against your account.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">16. Indemnification</h4>
  <p>
    You agree to indemnify, defend, and hold harmless Chatra, its owners, operators, employees, and affiliates from any claims, damages, losses, liabilities, and expenses (including legal fees) arising from:
  </p>
  <ul class="list-disc pl-5 space-y-1">
    <li>Your use of the Service.</li>
    <li>Your violation of these Terms.</li>
    <li>Content you post or share on Chatra.</li>
    <li>Your violation of any laws or third-party rights.</li>
  </ul>

  <h4 class="font-semibold text-slate-200 mt-4">17. Disclaimer of Warranties</h4>
  <p>
    CHATRA IS PROVIDED "AS IS" AND "AS AVAILABLE" WITHOUT ANY WARRANTIES OF ANY KIND, EXPRESS OR IMPLIED.  
    We do not guarantee that the Service will be uninterrupted, secure, or error-free.  
    YOU USE CHATRA AT YOUR OWN RISK.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">18. Limitation of Liability</h4>
  <p>
    TO THE MAXIMUM EXTENT PERMITTED BY LAW, CHATRA, ITS OWNERS, AND AFFILIATES SHALL NOT BE LIABLE FOR:
  </p>
  <ul class="list-disc pl-5 space-y-1">
    <li>Indirect, incidental, special, consequential, or punitive damages.</li>
    <li>Loss of profits, data, or goodwill.</li>
    <li>User-generated content or actions of other users.</li>
    <li>Service interruptions, security breaches, or data loss.</li>
  </ul>
  <p>
    <strong>IN NO EVENT SHALL OUR TOTAL LIABILITY EXCEED $100 USD OR THE AMOUNT YOU PAID US (IF ANY) IN THE PAST 12 MONTHS.</strong>
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">19. Governing Law and Jurisdiction</h4>
  <p>
    These Terms are governed by the laws of the <strong>State of California</strong>, United States, without regard to conflict of law principles.  
    Any disputes arising from these Terms or your use of Chatra shall be resolved in the state or federal courts located in California.  
    You agree to submit to the personal jurisdiction of these courts.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">20. Changes to These Terms</h4>
  <p>
    We may update these Terms from time to time to improve clarity or follow new laws.  
    When we do, we will update the "Last updated" date above.  
    If you continue using Chatra after updates, that means you accept the new Terms.
  </p>

  <h4 class="font-semibold text-slate-200 mt-4">21. Contact Us</h4>
  <p>
    If you have questions, need help, or want to report a problem, contact us at:  
    üìß **chatrahelpcenter@gmail.com**
  </p>

</div>


        <button
          id="termsCloseBtn2"
          onclick="document.getElementById('termsModal').classList.add('modal-closed');document.getElementById('termsModal').classList.remove('modal-open');"
          class="w-full mt-6 px-4 py-2 rounded-lg bg-sky-600 hover:bg-sky-700 transition-colors font-medium text-slate-100"
        >
          Close
        </button>
      </div>
    </div>

    <!-- Privacy Policy Modal (global) -->
    <div
      id="privacyModal"
      class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
    >
      <div class="glass-card max-w-2xl w-full rounded-2xl p-6 sm:p-8 max-h-[90vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-2xl font-semibold text-slate-100">Privacy Policy</h3>
          <button
            id="privacyCloseBtn"
            onclick="document.getElementById('privacyModal').classList.add('modal-closed');document.getElementById('privacyModal').classList.remove('modal-open');"
            class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
          >
            ‚úï
          </button>
        </div>

        <!-- Privacy content - EDIT THIS SECTION WITH YOUR OWN PRIVACY POLICY -->
        <div id="privacyContent" class="text-sm text-slate-300 space-y-3 leading-relaxed">
          <p>
            <strong>Last Updated:</strong> December 6, 2025
          </p>

          <h4 class="font-semibold text-slate-200 mt-4">1. Information We Collect</h4>
          <p>
            We collect the information you provide directly, such as your username and password when you create an account.
            We also collect information about your interactions with our service, including messages and account settings.
          </p>

          <h4 class="font-semibold text-slate-200 mt-4">1.1 Account Information</h4>
          <p>When you create an account, we collect:</p>
          <ul class="list-disc pl-5 space-y-1">
            <li>Username</li>
            <li>Password (stored securely and never visible to us)</li>
          </ul>
          <p>We do not require your real name, phone number, or email.</p>

          <h4 class="font-semibold text-slate-200 mt-4">1.2 Messages</h4>
          <p>Chatra stores:</p>
          <ul class="list-disc pl-5 space-y-1">
            <li>Messages you send</li>
            <li>Timestamps</li>
            <li>Sender and recipient information</li>
            <li>Group chat participation</li>
          </ul>
          <p>
            Messages are not end-to-end encrypted, which means we can technically access them if needed for safety or moderation.
            We never sell or share your messages with advertisers.
          </p>

          <h4 class="font-semibold text-slate-200 mt-4">1.3 Usage Information</h4>
          <p>We may collect basic technical data such as:</p>
          <ul class="list-disc pl-5 space-y-1">
            <li>Device type</li>
            <li>Browser information</li>
            <li>IP address</li>
            <li>App performance and crash data</li>
          </ul>
          <p>This helps us keep Chatra running smoothly.</p>

          <h4 class="font-semibold text-slate-200 mt-4">2. How We Use Your Information</h4>
          <p>We use your information to:</p>
          <ul class="list-disc pl-5 space-y-1">
            <li>Provide chat features (messages, DMs, group chats)</li>
            <li>Keep the Service safe and functioning properly</li>
            <li>Prevent spam, abuse, and violations of our Terms</li>
            <li>Fix bugs and improve performance</li>
          </ul>
          <p>We do not sell your information or use it for targeted advertising.</p>

          <h4 class="font-semibold text-slate-200 mt-4">3. Who Can See Your Information?</h4>

          <h5 class="font-semibold text-slate-200 mt-4">3.1 Other Users</h5>
          <ul class="list-disc pl-5 space-y-1">
            <li>Messages in public or group chats are visible to everyone in that chat.</li>
            <li>Direct Messages (DMs) are visible only to the people in the conversation.</li>
          </ul>

          <h5 class="font-semibold text-slate-200 mt-4">3.2 Administrators</h5>
          <p>Authorized administrators may access stored data only when necessary, such as:</p>
          <ul class="list-disc pl-5 space-y-1">
            <li>Investigating abuse, threats, or unsafe behavior</li>
            <li>Handling reports or fixing technical issues</li>
            <li>Enforcing the Terms of Service</li>
            <li>Complying with legal requirements</li>
          </ul>

          <h5 class="font-semibold text-slate-200 mt-4">3.3 Third Parties</h5>
          <p>
            We do not sell, rent, or trade your data with third parties.
            We may use trusted services (such as Firebase) to store data securely.
          </p>

          <h4 class="font-semibold text-slate-200 mt-4">4. Data Safety</h4>
          <p>We take reasonable steps to protect your information, including:</p>
          <ul class="list-disc pl-5 space-y-1">
            <li>Secure password storage</li>
            <li>Database rules that restrict access</li>
            <li>Monitoring for abuse or attacks</li>
            <li>Regular system updates</li>
          </ul>
          <p>However, no online service is 100% secure, and we cannot guarantee absolute protection.</p>

          <h4 class="font-semibold text-slate-200 mt-4">5. Your Choices and Controls</h4>
          <p>You may:</p>
          <ul class="list-disc pl-5 space-y-1">
            <li>Change your username or account information</li>
            <li>Request message deletion</li>
            <li>Request account deletion</li>
            <li>Stop using Chatra at any time</li>
          </ul>
          <p>
            Deleting your account permanently removes your username and profile data.
            Some message logs may be kept temporarily for safety or legal reasons.
          </p>

          <h4 class="font-semibold text-slate-200 mt-4">6. Children‚Äôs Privacy</h4>
          <p>
            Chatra is for users <strong>13 years or older</strong>.
            We do not knowingly collect data from children under 13.
            If we learn a user under 13 has created an account, we will remove it.
          </p>

          <h4 class="font-semibold text-slate-200 mt-4">7. Changes to This Policy</h4>
          <p>
            We may update this Privacy Policy from time to time.
            When we do, we will update the ‚ÄúLast updated‚Äù date above.
            If you continue using Chatra after changes, you accept the updated Policy.
          </p>

          <h4 class="font-semibold text-slate-200 mt-4">8. Contact Us</h4>
          <p>
            If you have questions or need help with your data, contact us at:
            üìß <strong>chatrahelpcenter@gmail.com</strong>
          </p>
        </div>


        <button
          id="privacyCloseBtn2"
          onclick="document.getElementById('privacyModal').classList.add('modal-closed');document.getElementById('privacyModal').classList.remove('modal-open');"
          class="w-full mt-6 px-4 py-2 rounded-lg bg-sky-600 hover:bg-sky-700 transition-colors font-medium text-slate-100"
        >
          Close
        </button>
      </div>
    </div>

    <!-- Chat Interface (hidden by default) -->
<div
  id="chatInterface"
  class="hidden flex-1 min-h-0 flex flex-col"
>
  <!-- FULLSCREEN chat container -->
  <div
    class="glass-card flex-1 min-h-0 flex flex-col w-full rounded-none overflow-hidden"
  >
    <!-- Chat header with menu + logout -->
    <div
      class="relative flex items-center justify-between px-4 sm:px-5 py-3 bg-slate-900/70 border-b border-slate-800/50"
    >
      <div class="flex items-center gap-3">
        <!-- Hamburger Menu Button -->
        <button
          id="menuToggle"
          class="p-1.5 hover:bg-slate-700 rounded-lg transition-colors"
          title="Menu"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-slate-300">
            <line x1="3" y1="6" x2="21" y2="6"></line>
            <line x1="3" y1="12" x2="21" y2="12"></line>
            <line x1="3" y1="18" x2="21" y2="18"></line>
          </svg>
        </button>
        <span
          id="chatUserLabel"
          class="text-sm text-slate-200 font-medium"
        ></span>
      </div>

      <!-- Global Chat in Middle + Dev Paused + More -->
      <div class="absolute left-1/2 transform -translate-x-1/2 flex items-center gap-3">
        <!-- Global Chat -->
        <div class="flex items-center gap-2">
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-blue-400">
            <circle cx="12" cy="12" r="10"></circle>
            <line x1="2" y1="12" x2="22" y2="12"></line>
            <path d="M12 2a15.3 15.3 0 0 1 4 10 15.3 15.3 0 0 1-4 10 15.3 15.3 0 0 1-4-10 15.3 15.3 0 0 1 4-10z"></path>
          </svg>
          <span class="text-sm font-bold text-slate-100">Global Chat</span>
        </div>

        <!-- Divider -->
        <span class="text-slate-600">‚Ä¢</span>

        <!-- Dev paused + More -->
        <div class="flex items-center gap-2">
          <span class="text-sm font-semibold text-amber-300">Development Paused</span>
          <button
            type="button"
                onclick="window.location.href='chatra.html'"
            class="text-xs text-sky-400 hover:text-sky-300 underline underline-offset-2"
            title="More info"
            aria-label="More info"
          >
            More Info
          </button>
        </div>
      </div>

      <button
        id="logoutBtn"
        class="px-3 py-1.5 text-xs rounded-lg bg-slate-700 hover:bg-slate-600 transition-colors"
      >
        Logout
      </button>
    </div>


        <!-- Settings Modal -->
        <div
          id="settingsModal"
          class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
        >
          <div class="glass-card max-w-md w-full rounded-2xl p-6 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-lg font-semibold text-slate-100">Settings</h3>
              <button
                id="settingsCloseBtn"
                class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
              >
                ‚úï
              </button>
            </div>

            <!-- Message Size Control -->
            <div class="mb-5 pb-5 border-b border-slate-700">
              <label class="text-sm font-medium text-slate-200 block mb-2">Message Size</label>
              <div class="flex gap-2">
                <button
                  data-size="small"
                  class="size-btn flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-colors bg-slate-700 hover:bg-slate-600 text-slate-200"
                >
                  Small
                </button>
                <button
                  data-size="medium"
                  class="size-btn flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-colors bg-sky-600 hover:bg-sky-700 text-white active"
                >
                  Medium
                </button>
                <button
                  data-size="large"
                  class="size-btn flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-colors bg-slate-700 hover:bg-slate-600 text-slate-200"
                >
                  Large
                </button>
              </div>
            </div>

            <!-- Theme Control -->
            <div class="mb-5 pb-5 border-b border-slate-700">
              <label class="text-sm font-medium text-slate-200 block mb-2">Theme</label>
              <div class="flex gap-2">
                <button
                  data-theme="dark"
                  class="theme-btn flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-colors bg-sky-600 hover:bg-sky-700 text-white active flex items-center justify-center gap-1"
                >
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/></svg>
                  Dark
                </button>
                <button
                  data-theme="light"
                  class="theme-btn flex-1 px-3 py-2 rounded-lg text-xs font-medium transition-colors bg-slate-700 hover:bg-slate-600 text-slate-200 flex items-center justify-center gap-1"
                >
                  <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg>
                  Light
                </button>
              </div>
            </div>

            <!-- Fast Mode Toggle -->
            <div class="mb-5 pb-5 border-b border-slate-700 flex items-center justify-between">
              <div>
                <label id="fastModeLabel" class="text-sm font-medium text-slate-200 block mb-1">Fast Mode</label>
                <p class="text-xs text-slate-400">Limits message load to 50 and reduces effects.</p>
              </div>
              <label class="relative inline-flex items-center cursor-pointer">
                <input type="checkbox" id="fastModeToggle" class="sr-only peer">
                <div class="w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:bg-sky-600 transition-colors"></div>
                <span class="absolute left-1 top-1 w-4 h-4 bg-white rounded-full transition-transform peer-checked:translate-x-5"></span>
              </label>
            </div>

            <div class="text-xs text-slate-400 text-center">
              <p>Chatra v1.0</p>
            </div>
          </div>
        </div>

        <!-- User Profile Modal -->
        <div
          id="profileModal"
          class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
        >
          <div class="glass-card max-w-sm w-full rounded-2xl p-6 max-h-[90vh] overflow-y-auto">
            <div class="flex justify-between items-center mb-4">
              <h3 class="text-lg font-semibold text-slate-100">My Profile</h3>
              <button
                id="profileCloseBtn"
                class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
              >
                ‚úï
              </button>
            </div>

            <!-- Profile Banner -->
            <div class="mb-5 w-full">
              <div
                id="profileBannerPreview"
                class="w-full h-24 rounded-lg bg-gradient-to-r from-blue-500 to-purple-600 flex items-center justify-center text-white text-sm font-medium cursor-pointer hover:opacity-80 transition-opacity relative group overflow-hidden"
              >
                <span class="group-hover:hidden">Click to add banner</span>
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="hidden group-hover:block absolute group-hover:opacity-60">
                  <rect x="3" y="3" width="18" height="18" rx="2"/>
                  <circle cx="8.5" cy="8.5" r="1.5"/>
                  <path d="M21 15l-5-5L5 21"/>
                </svg>
              </div>
              <input
                id="profileBannerInput"
                type="file"
                accept="image/*"
                class="hidden"
              />
            </div>

            <!-- Profile Picture -->
            <div class="mb-5 flex flex-col items-center">
              <div
                id="profilePicPreview"
                class="h-20 w-20 rounded-full bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-2xl font-bold mb-2 shadow-lg"
              >
                <svg width="40" height="40" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
              </div>
              <input
                id="profilePicInput"
                type="file"
                accept="image/*"
                class="hidden"
              />
              <button
                id="uploadPicBtn"
                class="px-3 py-1.5 text-xs rounded-lg bg-slate-700 hover:bg-slate-600 transition-colors"
              >
                Upload Photo
              </button>
            </div>

            <!-- Username Input (Editable) -->
            <div class="mb-4">
              <label class="text-xs font-medium text-slate-300 block mb-1">Username</label>
              <input
                id="profileUsername"
                type="text"
                placeholder="Your username"
                class="w-full p-2 rounded-lg bg-slate-800/80 border border-slate-600/60 focus:border-sky-400 focus:ring-2 focus:ring-sky-500/60 outline-none transition-all text-sm text-slate-100 placeholder-slate-500"
              />
            </div>

            <!-- Bio -->
            <div class="mb-4">
              <label class="text-xs font-medium text-slate-300 block mb-1">Bio (max 150 chars)</label>
              <textarea
                id="profileBio"
                placeholder="Tell us about yourself..."
                maxlength="150"
                class="w-full p-2 rounded-lg bg-slate-800/80 border border-slate-600/60 focus:border-sky-400 focus:ring-2 focus:ring-sky-500/60 outline-none transition-all text-sm text-slate-100 placeholder-slate-500 resize-none"
                rows="3"
              ></textarea>
            </div>

            <!-- Save Button -->
            <button
              id="saveProfileBtn"
              class="w-full px-4 py-2 rounded-lg bg-sky-600 hover:bg-sky-700 transition-colors font-medium text-sm text-white"
            >
              Save Profile
            </button>
          </div>
        </div>

        <!-- View User Profile Modal (Read-Only) -->
        <div
          id="viewProfileModal"
          class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
        >
          <div class="glass-card max-w-sm w-full rounded-3xl p-8 max-h-[90vh] overflow-y-auto text-center">
            <!-- Close Button -->
            <button
              id="viewProfileCloseBtn"
              class="absolute top-4 right-4 p-1 hover:bg-slate-700 rounded-lg transition-colors"
            >
              ‚úï
            </button>

            <!-- Profile Banner + Picture Container -->
            <div class="relative mb-8">
              <!-- Profile Banner (behind picture) -->
              <div
                id="viewProfileBanner"
                class="w-full h-32 rounded-xl bg-gradient-to-r from-blue-500 to-purple-600 overflow-hidden"
                style="background-size: cover; background-position: center;"
              ></div>
              
              <!-- Large Profile Picture (overlapping banner) -->
              <div class="absolute -bottom-12 left-1/2 transform -translate-x-1/2">
                <div
                  id="viewProfilePic"
                  class="h-32 w-32 rounded-full bg-gradient-to-br from-sky-500 to-sky-600 flex items-center justify-center text-white text-5xl font-bold shadow-2xl ring-4 ring-slate-800"
                >
                  <svg width="64" height="64" viewBox="0 0 24 24" fill="currentColor"><path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/></svg>
                </div>
              </div>
            </div>

            <!-- Username -->
            <h2 id="viewProfileName" class="text-2xl font-bold text-slate-100 mb-2 mt-16">
              Username
            </h2>

            <!-- Bio -->
            <p id="viewProfileBio" class="text-sm text-slate-300 mb-6 leading-relaxed">
              No bio yet
            </p>

            <!-- Friend Request Button -->
            <button
              id="sendFriendRequestBtn"
              class="w-full px-4 py-2 rounded-lg bg-sky-600 hover:bg-sky-700 transition-colors font-medium text-sm text-white mb-2"
            >
              Add Friend
            </button>

            <!-- Block Button -->
            <button
              id="blockUserBtn"
              class="w-full px-4 py-2 rounded-lg bg-red-600 hover:bg-red-700 transition-colors font-medium text-sm text-white mb-2 flex items-center justify-center gap-2"
            >
              <svg width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="10"/>
                <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/>
              </svg>
              Block User
            </button>

            <div
              id="friendRequestStatus"
              class="hidden text-xs text-slate-200 bg-slate-800 border border-slate-700 rounded-lg px-3 py-2 mb-3 text-left"
              role="status"
            ></div>

            <!-- Admin Actions (visible only to admins) -->
            <div
              id="profileAdminActions"
              class="hidden flex gap-2 mb-3"
            >
              <button
                id="profileBanBtn"
                class="flex-1 px-3 py-2 rounded-lg bg-red-600 hover:bg-red-700 transition-colors font-medium text-xs text-white"
              >
                Ban
              </button>
              <button
                id="profileMuteBtn"
                class="flex-1 px-3 py-2 rounded-lg bg-yellow-600 hover:bg-yellow-700 transition-colors font-medium text-xs text-white"
              >
                Mute
              </button>
              <button
                id="profileWarnBtn"
                class="flex-1 px-3 py-2 rounded-lg bg-blue-600 hover:bg-blue-700 transition-colors font-medium text-xs text-white"
              >
                Warn
              </button>
              <!-- Clear HW Ban removed -->
            </div>

            <!-- Close Button (Bottom) -->
            <button
              id="viewProfileCloseBtn2"
              class="w-full px-4 py-2 rounded-lg bg-slate-700 hover:bg-slate-600 transition-colors font-medium text-sm text-slate-100"
            >
              Close
            </button>
          </div>
        </div>

        <!-- Chat Messages -->
        <div
          id="messages"
          class="flex-1 min-h-0 overflow-y-auto px-2 sm:px-3 py-2 sm:py-3 space-y-1 bg-slate-900"
        ></div>

        <!-- Combined status bar (typing + warnings) -->
        <div
          class="px-4 py-1.5 text-xs bg-slate-800 border-t border-slate-700 flex items-center gap-2 text-slate-300"
        >
          <span
            class="h-1.5 w-1.5 rounded-full bg-emerald-500"
          ></span>
          <p
            id="typingIndicator"
            class="flex-1 min-h-[0.5rem]"
            style="padding: 0; margin: 0;"
          ></p>
          <!-- Old warning element kept but visually empty (text controlled in JS) -->
          <p
            id="sendWarning"
            class="hidden text-sm text-red-400 min-h-[0.5rem]"
          ></p>
        </div>

        <!-- Media Preview -->
        <div id="mediaPreview" class="hidden p-3 bg-slate-800 border-t border-slate-700">
          <div class="flex items-start gap-3">
            <div id="mediaPreviewContent" class="flex-1"></div>
            <button
              type="button"
              id="cancelMediaBtn"
              title="Cancel media upload"
              class="p-1 hover:bg-slate-700 rounded-lg transition-colors text-slate-400"
            >
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <line x1="18" y1="6" x2="6" y2="18"></line>
                <line x1="6" y1="6" x2="18" y2="18"></line>
              </svg>
            </button>
          </div>
        </div>

        <!-- Message Input (wrapped in a form so Enter submits on any device) -->
        <form
          id="messageForm"
          class="p-2 sm:p-3 bg-slate-900 border-t border-slate-800 w-full"
        >
          <div
            id="muteInlineBanner"
            class="hidden mb-2 rounded-lg border border-blue-600 bg-slate-800 text-slate-100 px-3 py-2 text-sm flex items-center justify-between gap-2"
          >
            <span id="muteInlineText"></span>
          </div>
          <div
            class="input-shell flex items-center gap-1.5 sm:gap-2 bg-slate-800 rounded-lg px-2 sm:px-3 py-1.5 sm:py-2"
          >
            <input type="file" id="imageInput" accept="image/*,video/*" title="Select image or video to upload" class="hidden" />
            <button
              type="button"
              id="mediaUploadBtn"
              class="p-2 hover:bg-slate-700 rounded-lg transition-colors"
              title="Upload image or video"
              aria-label="Upload image or video"
            >
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-slate-400">
                <rect x="3" y="3" width="18" height="18" rx="2" ry="2"/>
                <circle cx="8.5" cy="8.5" r="1.5"/>
                <polyline points="21 15 16 10 5 21"/>
              </svg>
            </button>
            <input
              id="msgInput"
              class="flex-1 px-3 py-2.5 rounded-lg bg-transparent text-sm sm:text-base placeholder:text-slate-500 focus:outline-none focus:ring-0"
              placeholder="Type a message..."
              autocomplete="off"
            />
            <button
              id="sendBtn"
              type="submit"
              class="btn-primary flex items-center gap-2 px-4 py-2 rounded-lg bg-sky-600 hover:bg-sky-700 text-sm sm:text-[15px] font-medium transition-colors"
            >
              <span>Send</span>
              <span class="text-lg leading-none">‚û§</span>
            </button>
          </div>
        </form>
      </div>
    </div>

    <!-- Warn Reason Modal -->
    <div
      id="warnReasonModal"
      class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center hidden"
    >
      <div class="bg-slate-900 border border-slate-700 p-6 rounded-xl w-96 shadow-2xl">
        <h2 class="text-xl font-bold text-yellow-400 mb-4">Issue a Warning</h2>
        <p class="text-slate-300 mb-4">Select a reason or type a custom one:</p>
        
        <div class="space-y-2 mb-4">
          <button id="warnReasonSpam" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üì® Spam</button>
          <button id="warnReasonAbuse" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üò† Abusive Language</button>
          <button id="warnReasonDisruption" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üí¢ Disruption</button>
          <button id="warnReasonHarassment" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üö® Harassment</button>
        </div>

        <div class="mb-4">
          <input
            id="warnReasonCustom"
            type="text"
            placeholder="Or type a custom reason..."
            class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-slate-100 placeholder-slate-500"
          />
        </div>

        <div class="flex gap-2">
          <button
            id="warnReasonConfirm"
            class="flex-1 bg-yellow-600 hover:bg-yellow-700 px-4 py-2 rounded-md text-white font-semibold"
          >
            Issue Warning
          </button>
          <button
            id="warnReasonCancel"
            class="flex-1 bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-md text-slate-200"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Mute Reason Modal -->
    <div
      id="muteReasonModal"
      class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center hidden"
    >
      <div class="bg-slate-900 border border-slate-700 p-6 rounded-xl w-96 shadow-2xl">
        <h2 class="text-xl font-bold text-blue-400 mb-4">Mute User</h2>
        <p class="text-slate-300 mb-4">Select a reason and duration:</p>
        
        <div class="space-y-2 mb-4">
          <button id="muteReasonSpam" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üì® Spam</button>
          <button id="muteReasonAbuse" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üò† Abusive Language</button>
          <button id="muteReasonDisruption" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üí¢ Disruption</button>
          <button id="muteReasonHarassment" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üö® Harassment</button>
        </div>

        <div class="mb-4">
          <input
            id="muteReasonCustom"
            type="text"
            placeholder="Or type a custom reason..."
            class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-slate-100 placeholder-slate-500 mb-3"
          />
          <label class="block text-sm text-slate-300 mb-2">Duration (minutes):</label>
          <input
            id="muteDuration"
            type="number"
            placeholder="10"
            min="1"
            max="10080"
            value="10"
            class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-slate-100"
          />
        </div>

        <div class="flex gap-2">
          <button
            id="muteReasonConfirm"
            class="flex-1 bg-blue-600 hover:bg-blue-700 px-4 py-2 rounded-md text-white font-semibold"
          >
            Mute User
          </button>
          <button
            id="muteReasonCancel"
            class="flex-1 bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-md text-slate-200"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Ban Reason Modal -->
    <div
      id="banReasonModal"
      class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center hidden"
    >
      <div class="bg-slate-900 border border-slate-700 p-6 rounded-xl w-96 shadow-2xl">
        <h2 class="text-xl font-bold text-red-500 mb-4">Ban User</h2>
        <p class="text-slate-300 mb-4">Select a reason and duration:</p>
        
        <div class="space-y-2 mb-4">
          <button id="banReasonSpam" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üì® Spam</button>
          <button id="banReasonAbuse" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üò† Abusive Language</button>
          <button id="banReasonDisruption" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üí¢ Disruption</button>
          <button id="banReasonHarassment" class="w-full text-left bg-slate-800 hover:bg-slate-700 px-3 py-2 rounded text-slate-200">üö® Harassment</button>
        </div>

        <div class="mb-4">
          <input
            id="banReasonCustom"
            type="text"
            placeholder="Or type a custom reason..."
            class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-slate-100 placeholder-slate-500 mb-3"
          />
          <label class="block text-sm text-slate-300 mb-2">Duration:</label>
          <select
            id="banDuration"
            title="Select ban duration"
            class="w-full bg-slate-800 border border-slate-600 rounded px-3 py-2 text-slate-100"
            aria-label="Ban duration"
          >
            <option value="60">1 hour</option>
            <option value="1440">1 day</option>
            <option value="10080">1 week</option>
            <option value="43200">1 month</option>
            <option value="permanent">üîí Permanent (delete account)</option>

          </select>
        </div>

        <div class="flex gap-2">
          <button
            id="banReasonConfirm"
            class="flex-1 bg-red-600 hover:bg-red-700 px-4 py-2 rounded-md text-white font-semibold"
          >
            Ban User
          </button>
          <button
            id="banReasonCancel"
            class="flex-1 bg-slate-700 hover:bg-slate-600 px-4 py-2 rounded-md text-slate-200"
          >
            Cancel
          </button>
        </div>
      </div>
    </div>

    <!-- Warning Popup -->
    <div
      id="warningPopup"
      class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center hidden"
    >
      <div class="bg-slate-900 border border-slate-700 p-6 rounded-xl w-80 text-center shadow-2xl">
        <h2 class="text-xl font-bold text-red-400 mb-3">You Have Been Warned</h2>
        <p id="warningReason" class="mb-4 text-slate-200"></p>

        <label class="flex items-center space-x-2 justify-center mb-4 select-none">
          <input type="checkbox" id="warningAgree" class="accent-red-500" />
          <span class="text-sm text-slate-300">I understand and agree</span>
        </label>

        <button
          id="closeWarningBtn"
          class="bg-red-500 px-4 py-2 rounded-md opacity-50 cursor-not-allowed text-white w-full"
          disabled
        >
          Close
        </button>
      </div>
    </div>

    <!-- Mute Popup -->
    <div
      id="mutePopup"
      class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center hidden"
    >
      <div class="bg-slate-900 border border-blue-500 p-6 rounded-xl w-80 text-center shadow-2xl">
        <p class="text-blue-400 font-bold mb-3 text-lg">You are muted</p>
        <p id="muteReason" class="text-slate-200 mb-4"></p>
        <p id="muteTimer" class="text-slate-300 text-sm font-semibold"></p>
      </div>
    </div>

    <!-- Ban Popup -->
    <div
      id="banPopup"
      class="fixed inset-0 bg-black/60 z-50 flex items-center justify-center hidden"
    >
      <div class="bg-slate-900 border border-red-600 p-6 rounded-xl w-80 text-center shadow-2xl">
        <p class="text-red-500 font-bold mb-3 text-lg">You have been banned</p>
        <p id="banReason" class="text-slate-200 mb-4"></p>
        <p class="text-slate-400 text-sm">You will be logged out in 3 seconds...</p>
      </div>
    </div>

    <!-- Rating Prompt Modal -->
    <div
      id="ratingModal"
      class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
    >
      <div class="glass-card max-w-sm w-full rounded-2xl p-6 space-y-4">
        <div class="flex justify-between items-center">
          <h3 class="text-lg font-semibold text-slate-100">Rate Chatra</h3>
          <button
            id="ratingCloseBtn"
            class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
            aria-label="Close rating dialog"
          >
            ‚úï
          </button>
        </div>

        <p class="text-sm text-slate-300">How is your experience going?</p>

        <div id="ratingStars" class="flex justify-center gap-2">
          <button class="rating-star h-10 w-10 rounded-full bg-slate-800 text-amber-300 text-lg" data-star="1">‚òÖ</button>
          <button class="rating-star h-10 w-10 rounded-full bg-slate-800 text-amber-300 text-lg" data-star="2">‚òÖ</button>
          <button class="rating-star h-10 w-10 rounded-full bg-slate-800 text-amber-300 text-lg" data-star="3">‚òÖ</button>
          <button class="rating-star h-10 w-10 rounded-full bg-slate-800 text-amber-300 text-lg" data-star="4">‚òÖ</button>
          <button class="rating-star h-10 w-10 rounded-full bg-slate-800 text-amber-300 text-lg" data-star="5">‚òÖ</button>
        </div>

        <div id="ratingFeedbackWrap" class="hidden space-y-2">
          <label class="text-xs text-slate-300">What should we improve?</label>
          <textarea
            id="ratingFeedback"
            class="w-full min-h-[96px] rounded-lg bg-slate-800 text-slate-100 p-3 border border-slate-700 focus:outline-none focus:ring-2 focus:ring-sky-600"
            placeholder="Optional: tell us more"
          ></textarea>
        </div>

        <label class="flex items-center gap-2 text-sm text-slate-300">
          <input
            type="checkbox"
            id="ratingDontShow"
            class="h-4 w-4 rounded border-slate-500 bg-slate-800/90"
          />
          <span>Don't show again</span>
        </label>

        <p id="ratingError" class="text-xs text-rose-400 min-h-[1rem]"></p>

        <div class="flex gap-2">
          <button
            id="ratingLaterBtn"
            class="flex-1 px-4 py-2 rounded-lg bg-slate-700 text-slate-200 hover:bg-slate-600 transition-colors"
          >
            Maybe later
          </button>
          <button
            id="ratingSubmitBtn"
            class="flex-1 px-4 py-2 rounded-lg bg-sky-600 text-white hover:bg-sky-500 transition-colors"
          >
            Submit
          </button>
        </div>
      </div>
    </div>

    <!-- Friend Requests Modal -->
    <div
      id="friendRequestsModal"
      class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
    >
      <div class="glass-card max-w-md w-full rounded-2xl p-6 max-h-[90vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-slate-100">Friend Requests</h3>
          <button
            id="friendRequestsCloseBtn"
            class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
          >
            ‚úï
          </button>
        </div>

        <div id="friendRequestsList" class="space-y-2">
          <!-- Friend requests will be rendered here -->
        </div>

        <p id="noFriendRequestsMsg" class="text-center text-slate-400 text-sm mt-4">
          No pending requests
        </p>
      </div>
    </div>

    <!-- Friends List Modal -->
    <div
      id="friendsListModal"
      class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
    >
      <div class="glass-card max-w-md w-full rounded-2xl p-6 max-h-[90vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-slate-100">Friends</h3>
          <button
            id="friendsListCloseBtn"
            class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
          >
            ‚úï
          </button>
        </div>

        <!-- Search Users -->
        <div class="mb-4">
          <input
            id="searchUsersInput"
            type="text"
            placeholder="Search users..."
            class="w-full px-4 py-2 bg-slate-700 text-slate-100 rounded-lg placeholder:text-slate-400 focus:outline-none focus:ring-2 focus:ring-sky-600"
          />
          <div id="searchResults" class="mt-2 space-y-2 max-h-60 overflow-y-auto">
            <!-- Search results will appear here -->
          </div>
        </div>

        <!-- Friends List -->
        <div class="border-t border-slate-700 pt-4">
          <h4 class="text-sm font-semibold text-slate-400 uppercase tracking-wider mb-2">Your Friends</h4>
          <div id="friendsList" class="space-y-2">
            <!-- Friends will be rendered here -->
          </div>

          <p id="noFriendsMsg" class="text-center text-slate-400 text-sm mt-4">
            No friends yet
          </p>
        </div>
      </div>
    </div>

    <!-- Blocked Users Modal -->
    <div
      id="blockedUsersModal"
      class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
    >
      <div class="glass-card max-w-md w-full rounded-2xl p-6 max-h-[90vh] overflow-y-auto">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-slate-100">Blocked Users</h3>
          <button
            id="blockedUsersCloseBtn"
            class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
          >
            ‚úï
          </button>
        </div>

        <div id="blockedUsersList" class="space-y-2">
          <!-- Blocked users will be rendered here -->
        </div>

        <p id="noBlockedUsersMsg" class="text-center text-slate-400 text-sm mt-4">
          No blocked users
        </p>
      </div>
    </div>

    <!-- Image Viewer Modal -->
    <div
      id="imageViewerModal"
      class="fixed inset-0 z-50 hidden items-center justify-center bg-black/90 backdrop-blur-sm"
      style="cursor: zoom-out;"
    >
      <button
        id="closeImageViewer"
        title="Close image viewer"
        class="absolute top-4 right-4 p-2 text-white hover:bg-white/10 rounded-lg transition-colors z-10"
        aria-label="Close image viewer"
      >
        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
          <line x1="18" y1="6" x2="6" y2="18"></line>
          <line x1="6" y1="6" x2="18" y2="18"></line>
        </svg>
      </button>
      <img
        id="imageViewerImg"
        alt="Full size image viewer"
        class="max-w-[95vw] max-h-[95vh] object-contain"
        style="cursor: zoom-out;"
      />
    </div>

    <!-- Side Panel -->
    <div
      id="sidePanel"
      class="fixed top-0 left-0 h-full w-72 glass-card z-50 flex flex-col transition-transform duration-300"
      style="transform: translateX(-100%);"
    >
      <!-- Side Panel Header -->
      <div class="flex justify-between items-center p-4 border-b border-slate-700/50">
        <div>
          <h3 class="text-lg font-semibold text-slate-100">Menu</h3>
          <p id="sidePanelUsername" class="text-xs text-slate-400"></p>
        </div>
        <button
          id="sidePanelClose"
          title="Close menu"
          class="p-1.5 hover:bg-slate-700 rounded-lg transition-colors"
          aria-label="Close menu"
        >
          <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
            <line x1="18" y1="6" x2="6" y2="18"></line>
            <line x1="6" y1="6" x2="18" y2="18"></line>
          </svg>
        </button>
      </div>

      <!-- Side Panel Content -->
      <div class="flex-1 overflow-y-auto p-4 space-y-6">
        <!-- Profile Section -->
        <div>
          <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">Profile</h4>
          <div class="space-y-1">
            <button
              id="sidePanelProfile"
              class="w-full px-4 py-2.5 text-left text-sm text-slate-100 hover:bg-slate-700/50 rounded-lg transition-colors flex items-center gap-3"
            >
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-slate-300">
                <path d="M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"/>
              </svg>
              My Profile
            </button>
            <button
              id="sidePanelSettings"
              class="w-full px-4 py-2.5 text-left text-sm text-slate-100 hover:bg-slate-700/50 rounded-lg transition-colors flex items-center gap-3"
            >
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-slate-300">
                <circle cx="12" cy="12" r="3"/>
                <path d="M12 1v6m0 6v10M5.64 5.64l4.24 4.24m4.24 4.24l4.24 4.24M1 12h6m10 0h6M5.64 18.36l4.24-4.24m4.24-4.24l4.24-4.24"/>
              </svg>
              Settings
            </button>
            <button
              id="sidePanelPrivacy"
              class="w-full px-4 py-2.5 text-left text-sm text-slate-100 hover:bg-slate-700/50 rounded-lg transition-colors flex items-center gap-3"
            >
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-slate-300">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"/>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"/>
              </svg>
              Privacy Settings
            </button>
          </div>
        </div>

        <!-- Social Section -->
        <div>
          <h4 class="text-xs font-semibold text-slate-400 uppercase tracking-wider mb-2">Social</h4>
          <div class="space-y-1">
            <button
              id="sidePanelFriendRequests"
              class="w-full px-4 py-2.5 text-left text-sm text-slate-100 hover:bg-slate-700/50 rounded-lg transition-colors flex items-center gap-3 relative"
            >
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-slate-300">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </svg>
              Friend Requests
              <span id="sidePanelFriendBadge" class="ml-auto bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
            </button>
            <button
              id="sidePanelFriends"
              class="w-full px-4 py-2.5 text-left text-sm text-slate-100 hover:bg-slate-700/50 rounded-lg transition-colors flex items-center gap-3"
            >
              <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor" class="text-slate-300">
                <path d="M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"/>
              </svg>
              Friends
            </button>
            <button
              id="sidePanelDMs"
              class="w-full px-4 py-2.5 text-left text-sm text-slate-100 hover:bg-slate-700/50 rounded-lg transition-colors flex items-center gap-3"
            >
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-slate-300">
                <path d="M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z"/>
              </svg>
              Direct Messages
              <span id="sidePanelDMBadge" class="ml-auto bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center hidden">0</span>
            </button>
            <button
              id="sidePanelBlocked"
              class="w-full px-4 py-2.5 text-left text-sm text-slate-100 hover:bg-slate-700/50 rounded-lg transition-colors flex items-center gap-3"
            >
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-slate-300">
                <circle cx="12" cy="12" r="10"/>
                <line x1="4.93" y1="4.93" x2="19.07" y2="19.07"/>
              </svg>
              Blocked Users
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Side Panel Overlay -->
    <div
      id="sidePanelOverlay"
      class="fixed inset-0 bg-black/50 backdrop-blur-sm z-40 hidden"
    ></div>

    <!-- Direct Messages Modal -->
    <div
      id="dmModal"
      class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
    >
      <div class="glass-card w-full max-w-5xl rounded-2xl p-4 sm:p-6 max-h-[90vh] overflow-hidden flex flex-col gap-4">
        <div class="flex justify-between items-center">
          <h3 class="text-xl font-semibold text-slate-100">Direct Messages</h3>
          <button
            id="dmCloseBtn"
            class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
          >
            ‚úï
          </button>
        </div>

        <div class="flex flex-col sm:flex-row gap-4 min-h-[60vh]">
          <!-- Conversations list -->
          <div class="sm:w-1/3 bg-slate-900/70 border border-slate-800 rounded-xl p-3 flex flex-col gap-3">
            <div class="flex items-center gap-2">
              <input
                id="dmUserSearch"
                type="text"
                placeholder="Search users..."
                class="w-full px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 focus:border-sky-500 focus:ring-2 focus:ring-sky-500/50 outline-none text-sm"
              />
              <button
                id="dmStartBtn"
                class="px-3 py-2 rounded-lg bg-sky-600 hover:bg-sky-700 text-white text-sm"
              >
                Start
              </button>
            </div>

            <div class="flex-1 overflow-y-auto space-y-2" id="dmConversationList">
              <!-- Conversations injected here -->
            </div>
          </div>

          <!-- Message view -->
          <div class="sm:flex-1 bg-slate-900/70 border border-slate-800 rounded-xl flex flex-col min-h-[50vh]">
            <div class="px-4 py-3 border-b border-slate-800 flex items-center justify-between">
              <div>
                <p class="text-sm text-slate-400">Chatting with</p>
                <p id="dmActiveUser" class="text-base text-slate-100 font-semibold">Select a conversation</p>
              </div>
              <button
                id="dmBlockBtn"
                class="text-xs px-3 py-1.5 rounded-lg bg-red-600 hover:bg-red-700 text-white"
              >
                Block
              </button>
            </div>

            <div id="dmMessages" class="flex-1 overflow-y-auto px-4 py-3 space-y-2 bg-slate-900"></div>

            <form id="dmForm" class="p-3 border-t border-slate-800 flex items-center gap-2">
              <button id="dmMediaUploadBtn" type="button" title="Upload image" aria-label="Upload image" class="p-2 rounded-lg bg-slate-800 border border-slate-700 hover:bg-slate-700 transition-colors">
                +
              </button>
              <input id="dmMediaInput" type="file" accept="image/*,video/*" class="hidden" />
              <input
                id="dmInput"
                class="flex-1 px-3 py-2 rounded-lg bg-slate-800 border border-slate-700 focus:border-sky-500 focus:ring-2 focus:ring-sky-500/50 outline-none text-sm"
                placeholder="Type a message..."
                autocomplete="off"
              />
              <button
                id="dmSendBtn"
                type="submit"
                class="px-4 py-2 rounded-lg bg-sky-600 hover:bg-sky-700 text-white text-sm font-medium"
              >
                Send
              </button>
            </form>
          </div>
        </div>

        <p id="dmError" class="text-xs text-red-400 min-h-[1rem]"></p>
      </div>
    </div>

    <!-- Notifications Modal -->
    <div
      id="notifModal"
      class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
    >
      <div class="glass-card w-full max-w-md rounded-2xl p-4 sm:p-6 max-h-[80vh] overflow-hidden flex flex-col gap-3">
        <div class="flex items-center justify-between">
          <h3 class="text-lg font-semibold text-slate-100">Notifications</h3>
          <button
            id="notifCloseBtn"
            class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
          >
            ‚úï
          </button>
        </div>
        <div id="notifList" class="flex-1 overflow-y-auto space-y-2 pr-1">
          <p class="text-xs text-slate-400">No notifications yet.</p>
        </div>
        <div class="flex justify-end gap-2 pt-2 border-t border-slate-800">
          <button
            id="notifClearBtn"
            class="px-3 py-2 text-sm rounded-lg bg-slate-700 hover:bg-slate-600 text-slate-100"
          >
            Clear
          </button>
        </div>
      </div>
    </div>

    <!-- Privacy Settings Modal -->
    <div
      id="privacySettingsModal"
      class="fixed inset-0 z-50 modal-closed flex items-center justify-center px-4 bg-black/50 backdrop-blur-sm"
    >
      <div class="glass-card max-w-md w-full rounded-2xl p-6">
        <div class="flex justify-between items-center mb-4">
          <h3 class="text-lg font-semibold text-slate-100">Privacy Settings</h3>
          <button
            id="privacySettingsCloseBtn"
            class="p-1 hover:bg-slate-700 rounded-lg transition-colors"
          >
            ‚úï
          </button>
        </div>

        <div class="space-y-4">
          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-slate-100">Allow Friend Requests</p>
              <p class="text-xs text-slate-400">Let others send you friend requests</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" id="allowFriendRequestsToggle" class="sr-only peer" checked>
              <div class="w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-sky-600"></div>
            </label>
          </div>

          <div class="flex items-center justify-between">
            <div>
              <p class="text-sm font-medium text-slate-100">Allow Direct Messages</p>
              <p class="text-xs text-slate-400">Let friends send you DMs</p>
            </div>
            <label class="relative inline-flex items-center cursor-pointer">
              <input type="checkbox" id="allowDMsToggle" class="sr-only peer" checked>
              <div class="w-11 h-6 bg-slate-700 peer-focus:outline-none rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-sky-600"></div>
            </label>
          </div>
        </div>

        <button
          id="savePrivacyBtn"
          class="w-full mt-6 px-4 py-2 bg-sky-600 hover:bg-sky-700 text-white rounded-lg transition-colors font-medium"
        >
          Save Settings
        </button>
      </div>
    </div>

    <!-- Delete Message Confirmation Modal -->
    <div
      id="deleteMessageModal"
      class="modal-overlay fixed inset-0 z-50 modal-closed items-center justify-center px-4"
    >
      <div class="glass-card max-w-sm w-full rounded-2xl p-6 border-2 border-red-500/30">
        <div class="flex items-center gap-3 mb-4">
          <div class="w-12 h-12 rounded-full bg-red-500/20 flex items-center justify-center">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" class="text-red-500">
              <path d="M3 6h18M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
              <line x1="10" y1="11" x2="10" y2="17"></line>
              <line x1="14" y1="11" x2="14" y2="17"></line>
            </svg>
          </div>
          <div>
            <h3 class="text-lg font-semibold text-slate-100">Delete Message</h3>
            <p class="text-sm text-slate-400">This action cannot be undone</p>
          </div>
        </div>

        <p class="text-sm text-slate-300 mb-6">
          Are you sure you want to delete this message? It will be removed for everyone.
        </p>

        <div class="flex gap-3">
          <button
            id="cancelDeleteBtn"
            class="flex-1 px-4 py-2 bg-slate-700 hover:bg-slate-600 text-slate-100 rounded-lg transition-colors font-medium"
          >
            Cancel
          </button>
          <button
            id="confirmDeleteBtn"
            class="flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-lg transition-colors font-medium"
          >
            Delete
          </button>
        </div>
      </div>
    </div>

    <script src="script.js"></script>

  </body>
</html>
